<!DOCTYPE html>
<html>
    <head>
        <title>Canvas Drawing</title>
        <style>
            canvas {
                border: 1px solid black;
            }
        </style>
    </head>
    <body>
        <canvas id="myCanvas" width="500" height="500"></canvas>
        <button id="clearButton">Clear Canvas</button>
        <button id="replayButton">Replay Drawing</button>
        <script>
            var canvas = document.getElementById('myCanvas');
            var ctx = canvas.getContext('2d');
            var clearButton = document.getElementById('clearButton');
            var replayButton = document.getElementById('replayButton');
            var drawing = false;
            var pathArray = [];
            var lastEventTime;

            function startDrawing(e) {
                drawing = true;
                lastEventTime = Date.now();
                draw(e);
            }

            function endDrawing() {
                drawing = false;
                ctx.beginPath();
            }

            function draw(e) {
                if(!drawing) return;
                var mouseX = e.clientX - canvas.offsetLeft;
                var mouseY = e.clientY - canvas.offsetTop;
                var currentTime = Date.now();
                var timeElapsed = currentTime - lastEventTime;
                pathArray.push({x: mouseX, y: mouseY, time: timeElapsed});
                ctx.lineTo(mouseX, mouseY);
                ctx.stroke();
                ctx.beginPath();
                ctx.moveTo(mouseX, mouseY);
                lastEventTime = currentTime;
            }

            function clearCanvas() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                pathArray = [];
            }

            async function replayDrawing() {
                clearCanvas();
                ctx.beginPath();
                for(let i = 0; i < pathArray.length; i++) {
                    ctx.lineTo(pathArray[i].x, pathArray[i].y);
                    ctx.stroke();
                    ctx.beginPath();
                    ctx.moveTo(pathArray[i].x, pathArray[i].y);
                    await new Promise(resolve => setTimeout(resolve, pathArray[i].time));
                }
            }

            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mouseup', endDrawing);
            canvas.addEventListener('mousemove', draw);
            clearButton.addEventListener('click', clearCanvas);
            replayButton.addEventListener('click', replayDrawing);
        </script>
    </body>
</html>

